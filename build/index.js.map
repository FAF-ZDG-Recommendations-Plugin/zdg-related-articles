{"version":3,"file":"index.js","mappings":"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","sources":["webpack:///./node_modules/@wordpress/icons/build-module/icon/index.js","webpack:///./node_modules/@wordpress/icons/build-module/library/external.js","webpack:///./node_modules/@wordpress/icons/build-module/library/settings.js","webpack:///external window [\"wp\",\"components\"]","webpack:///external window [\"wp\",\"coreData\"]","webpack:///external window [\"wp\",\"data\"]","webpack:///external window [\"wp\",\"editor\"]","webpack:///external window [\"wp\",\"element\"]","webpack:///external window [\"wp\",\"plugins\"]","webpack:///external window [\"wp\",\"primitives\"]","webpack:///external window \"ReactJSXRuntime\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./src/index.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { cloneElement, forwardRef } from '@wordpress/element';\n\n/** @typedef {{icon: JSX.Element, size?: number} & import('@wordpress/primitives').SVGProps} IconProps */\n\n/**\n * Return an SVG icon.\n *\n * @param {IconProps}                                 props icon is the SVG component to render\n *                                                          size is a number specifying the icon size in pixels\n *                                                          Other props will be passed to wrapped SVG component\n * @param {import('react').ForwardedRef<HTMLElement>} ref   The forwarded ref to the SVG element.\n *\n * @return {JSX.Element}  Icon component\n */\nfunction Icon({\n  icon,\n  size = 24,\n  ...props\n}, ref) {\n  return cloneElement(icon, {\n    width: size,\n    height: size,\n    ...props,\n    ref\n  });\n}\nexport default forwardRef(Icon);\n//# sourceMappingURL=index.js.map","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst external = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z\"\n  })\n});\nexport default external;\n//# sourceMappingURL=external.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst settings = /*#__PURE__*/_jsxs(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: [/*#__PURE__*/_jsx(Path, {\n    d: \"m19 7.5h-7.628c-.3089-.87389-1.1423-1.5-2.122-1.5-.97966 0-1.81309.62611-2.12197 1.5h-2.12803v1.5h2.12803c.30888.87389 1.14231 1.5 2.12197 1.5.9797 0 1.8131-.62611 2.122-1.5h7.628z\"\n  }), /*#__PURE__*/_jsx(Path, {\n    d: \"m19 15h-2.128c-.3089-.8739-1.1423-1.5-2.122-1.5s-1.8131.6261-2.122 1.5h-7.628v1.5h7.628c.3089.8739 1.1423 1.5 2.122 1.5s1.8131-.6261 2.122-1.5h2.128z\"\n  })]\n});\nexport default settings;\n//# sourceMappingURL=settings.js.map","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"editor\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"plugins\"];","module.exports = window[\"wp\"][\"primitives\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { registerPlugin } from '@wordpress/plugins';\r\nimport { PluginDocumentSettingPanel } from '@wordpress/editor';\r\nimport { CheckboxControl, Button, ToggleControl, SelectControl, TextControl, IconButton, PanelBody, TextareaControl } from '@wordpress/components';\r\nimport { useEntityProp } from '@wordpress/core-data';\r\nimport { useState, useEffect } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { Icon, external, settings } from '@wordpress/icons';\r\n\r\n// Updated helper to format the published date\r\nconst formatDate = publishedAt => {\r\n    const date = new Date(publishedAt);\r\n    return date.toLocaleDateString('ro-RO', { day: '2-digit', month: '2-digit', year: 'numeric' });\r\n};\r\n\r\nconst SidebarPanel = () => {\r\n    // Use the new useEntityProp hook instead of useSelect/useDispatch\r\n    const [meta, setMeta] = useEntityProp('postType', 'post', 'meta');\r\n    \r\n    // Get the post content using useSelect\r\n    const postContent = useSelect((select) =>\r\n        select('core/editor').getEditedPostAttribute('content')\r\n    );\r\n    \r\n    // Debug logs\r\n    useEffect(() => {}, [meta]);\r\n\r\n    // Parse the selected articles from the string in meta\r\n    const selectedArticles = (() => {\r\n        try {\r\n            return JSON.parse(meta.zdg_related_articles || '[]');\r\n        } catch (e) {\r\n            console.error(\"Error parsing saved articles\", e);\r\n            return [];\r\n        }\r\n    })();\r\n    \r\n    const relatedEnabled = meta.zdg_related_enabled || false;\r\n    \r\n    // Local state for article list and fetching state\r\n    const [fetching, setFetching] = useState(false);\r\n    const [articles, setArticles] = useState(selectedArticles);\r\n\r\n    // State for start date selection\r\n    const [startYear, setStartYear] = useState((new Date().getFullYear() - 2).toString());\r\n    const [startMonth, setStartMonth] = useState('01');\r\n\r\n    // State for end date selection (default to current date)\r\n    const currentYear = new Date().getFullYear().toString();\r\n    const currentMonth = (new Date().getMonth() + 1).toString().padStart(2, '0');\r\n    const [endYear, setEndYear] = useState(currentYear);\r\n    const [endMonth, setEndMonth] = useState(currentMonth);\r\n\r\n    // State for advanced options visibility and keywords\r\n    const [showAdvancedOptions, setShowAdvancedOptions] = useState(false);\r\n    const [mandatoryKeywords, setMandatoryKeywords] = useState('');\r\n    const [optionalKeywords, setOptionalKeywords] = useState('');\r\n\r\n    // Options for year selection (adjust as needed)\r\n    const yearOptions = Array.from({ length: (new Date()).getFullYear() - 2007 }, (_, i) => {\r\n        const year = 2008 + i;\r\n        return { label: year.toString(), value: year.toString() };\r\n    }).reverse();\r\n\r\n    // Options for month selection\r\n    const monthOptions = [\r\n        { label: 'Ianuarie', value: '01' },\r\n        { label: 'Februarie', value: '02' },\r\n        { label: 'Martie', value: '03' },\r\n        { label: 'Aprilie', value: '04' },\r\n        { label: 'Mai', value: '05' },\r\n        { label: 'Iunie', value: '06' },\r\n        { label: 'Iulie', value: '07' },\r\n        { label: 'August', value: '08' },\r\n        { label: 'Septembrie', value: '09' },\r\n        { label: 'Octombrie', value: '10' },\r\n        { label: 'Noiembrie', value: '11' },\r\n        { label: 'Decembrie', value: '12' },\r\n    ];\r\n\r\n    // Update the toggle\r\n    const toggleRelatedEnabled = (value) => {\r\n        setMeta({\r\n            ...meta,\r\n            zdg_related_enabled: value\r\n        });\r\n    };\r\n\r\n    // Update the article selection - store complete article object\r\n    const toggleArticle = (article) => {\r\n        let newSelection;\r\n        \r\n        // Check if this article is already selected by comparing IDs\r\n        const isSelected = selectedArticles.some(item => item.ID === article.ID);\r\n        \r\n        if (isSelected) {\r\n            // Remove the article from selection\r\n            newSelection = selectedArticles.filter(item => item.ID !== article.ID);\r\n        } else {\r\n            // Add the complete article object to selection\r\n            newSelection = [...selectedArticles, article];\r\n        }\r\n            \r\n        setMeta({\r\n            ...meta,\r\n            zdg_related_articles: JSON.stringify(newSelection)\r\n        });\r\n    };\r\n\r\n    // State for API error message\r\n    const [apiError, setApiError] = useState('');\r\n\r\n    // Helper function to parse keywords string into array\r\n    const parseKeywords = (keywordsString) => {\r\n        return keywordsString.split(',').map(kw => kw.trim()).filter(kw => kw !== '');\r\n    };\r\n\r\n    const fetchSimilarArticles = () => {\r\n        setFetching(true);\r\n        setApiError(''); // Clear any previous error\r\n        \r\n        // Check if API URL is configured\r\n        if (!zdgApi.apiConfigured) {\r\n            setApiError('API URL nu este configurat. Accesați Setări > ZDG Related Articles pentru a configura API URL.');\r\n            setFetching(false);\r\n            return;\r\n        }\r\n        \r\n        // Extract text content from HTML\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = postContent || '';\r\n        const textContent = tempDiv.innerText.replace(/\\s+/g, ' ').trim();\r\n        \r\n        // Get the IDs of already selected articles\r\n        const selectedIds = selectedArticles.map(article => article.ID);\r\n        \r\n        // Use the API URL from WordPress settings\r\n        const apiUrl = zdgApi.apiUrl;\r\n        const endpoint = `${apiUrl}recommend`;\r\n        \r\n        fetch(endpoint, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({\r\n                query_text: textContent,\r\n                top_k: 10,  // Always fetch 10 articles\r\n                end_date: `${endYear}-${endMonth}-${new Date(parseInt(endYear), parseInt(endMonth), 0).getDate().toString().padStart(2, '0')}`, // Use last day of selected month\r\n                mandatory_kw: parseKeywords(mandatoryKeywords), // Add mandatory keywords\r\n                optional_kw: parseKeywords(optionalKeywords) // Add optional keywords\r\n            })\r\n        })\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                // If the response status is not OK, throw an error\r\n                throw new Error(`HTTP error! Status: ${response.status}`);\r\n            }\r\n            return response.json();\r\n        })        \r\n        .then(data => {\r\n            // Log the full response for debugging\r\n            console.log(\"Fetched response:\", data);\r\n            \r\n            // Check for API error status in data[1]\r\n            if (Array.isArray(data) && data.length >= 2 && data[1] !== 200) {\r\n                // Handle non-200 status code from backend API\r\n                console.error(`API error status: ${data[1]}`);\r\n                \r\n                // Check if there's an error message in data[0]\r\n                if (data[0] && data[0].message) {\r\n                    throw new Error(data[0].message);\r\n                } else {\r\n                    throw new Error(`Eroare server: ${data[1]}`);\r\n                }\r\n            }\r\n            \r\n            // Extract articles from the first element of the response array\r\n            if (Array.isArray(data) && data.length >= 1) {\r\n                const newArticlesData = data[0];\r\n                \r\n                // Check if we got back an object with a message property instead of articles\r\n                if (newArticlesData && newArticlesData.message) {\r\n                    console.error(\"API message:\", newArticlesData.message);\r\n                    setApiError(`Mesaj de la server: ${newArticlesData.message}`);\r\n                    return;\r\n                }\r\n                \r\n                // Check if we have an array of articles\r\n                if (!Array.isArray(newArticlesData) || newArticlesData.length === 0) {\r\n                    console.error(\"No articles returned:\", data);\r\n                    setApiError(\"Nu s-au găsit articole. Verificați perioada selectată și/sau cuvintele cheie.\");\r\n                    return;\r\n                }\r\n                \r\n                // Filter out articles that are already selected\r\n                const filteredNewArticles = newArticlesData.filter(\r\n                    newArticle => !selectedIds.includes(newArticle.ID)\r\n                );\r\n                \r\n                // Keep only enough new articles to have a total of 10 (including selected)\r\n                const maxNewArticlesToAdd = Math.max(10 - selectedArticles.length, 0);\r\n                const limitedNewArticles = filteredNewArticles.slice(0, maxNewArticlesToAdd);\r\n                \r\n                // Set articles to be the combination of selected and new filtered articles\r\n                setArticles([...selectedArticles, ...limitedNewArticles]);\r\n            } else {\r\n                console.error(\"Unexpected API response format:\", data);\r\n                setApiError(\"Nu s-au găsit articole. Verificați perioada selectată și/sau cuvintele cheie.\");\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.error(\"Error fetching similar articles:\", error);\r\n            setApiError(`Eroare la obținerea articolelor similare: ${error.message}`);\r\n        })\r\n        .finally(() => {\r\n            setFetching(false);\r\n        });\r\n    };\r\n\r\n    // State for manual article link input\r\n    const [manualArticleLink, setManualArticleLink] = useState('');\r\n    // State for manual article error message\r\n    const [manualArticleError, setManualArticleError] = useState('');\r\n\r\n    const handleAddManualArticle = () => {\r\n        if (manualArticleLink) {\r\n            setManualArticleError(''); // Clear any previous error\r\n            // Extract post name from the link (example: https://www.example.com/post-name/ -> post-name)\r\n            const postName = manualArticleLink.split('/').filter(Boolean).pop();\r\n            // Make an API request to a custom endpoint to fetch article data by post name\r\n            fetch(`${zdgApi.baseUrl}zdg-related-articles/v1/article-by-name?post_name=${postName}`, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'X-WP-Nonce': zdgApi.nonce\r\n                }\r\n            })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data && data.ID) {\r\n                    // Add the fetched article to selected articles\r\n                    toggleArticle(data);\r\n                    // Also add the article to the local articles state if not already included\r\n                    setArticles(prevArticles => {\r\n                        if (prevArticles.some(article => article.ID === data.ID)) {\r\n                            return prevArticles;\r\n                        }\r\n                        return [...prevArticles, data];\r\n                    });\r\n                    // Clear the input field\r\n                    setManualArticleLink('');\r\n                } else {\r\n                    setManualArticleError('Articolul nu a fost găsit.');\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.error(\"Error fetching article by post name:\", error);\r\n                setManualArticleError(`Eroare la căutarea articolului:${error.message}`);\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <PluginDocumentSettingPanel name=\"zdg-related-panel\" title=\"Articole similare\">\r\n            <ToggleControl\r\n                label=\"Afișare articole recomandate\"\r\n                __nextHasNoMarginBottom={true}\r\n                checked={ relatedEnabled }\r\n                onChange={ toggleRelatedEnabled }\r\n            />\r\n            {/* Manual article link input with separate label */}\r\n            <div style={{ marginTop: '10px' }}>\r\n                <label htmlFor=\"manual-article-link\" style={{ display: 'block', marginBottom: '5px' }}>\r\n                    <strong>Adaugă un articol manual (Link)</strong>\r\n                </label>\r\n                <div style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'space-between',\r\n                    width: '100%'\r\n                }}>\r\n                    <div style={{ flexGrow: '1' }}>\r\n                        <TextControl\r\n                            __nextHasNoMarginBottom={true}\r\n                            id=\"manual-article-link\"\r\n                            placeholder=\"https://www.zdg.com/articol\"\r\n                            type=\"url\"\r\n                            value={ manualArticleLink }\r\n                            onChange={ (newLink) => setManualArticleLink(newLink) }\r\n                            style={{\r\n                                width: '100%',\r\n                            }}\r\n                        />\r\n                    </div>\r\n                    <Button\r\n                        isSecondary\r\n                        onClick={ handleAddManualArticle }\r\n                        style={{\r\n                            paddingBottom: '12px',\r\n                            marginLeft: '5px',\r\n                            // marginBottom: '8px',\r\n                            width: '32px',\r\n                            height: '32px',\r\n                            fontSize: '28px',\r\n                            lineHeight: '32px',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center'\r\n                        }}\r\n                    >\r\n                        +\r\n                    </Button>\r\n                </div>\r\n                {manualArticleError && (\r\n                    <p style={{ color: 'red'}}>\r\n                        {manualArticleError}\r\n                    </p>\r\n                )}\r\n            </div>\r\n            {/* Advanced Options Section */}\r\n            <label htmlFor=\"zdg-fetch-similar-articles\" style={{ display: 'block', marginTop: '10px', }}>\r\n                    <strong>Căutare automată de articole</strong>\r\n            </label>\r\n            <div \r\n                id=\"zdg-advanced-options\"\r\n                className={`zdg-advanced-options-container ${showAdvancedOptions ? 'expanded' : ''}`}\r\n                style={{\r\n                    maxHeight: showAdvancedOptions ? '500px' : '0px',\r\n                    opacity: showAdvancedOptions ? 1 : 0,\r\n                    overflow: 'hidden',\r\n                    transition: 'all 0.5s ease',\r\n                    visibility: showAdvancedOptions ? 'visible' : 'hidden',\r\n                }}\r\n            >\r\n                <div style={{  \r\n                    backgroundColor: '#f0f0f0', // Slightly darker background\r\n                    padding: '10px',          // Add padding\r\n                    border: '1px solid #ddd', // Optional border for clarity\r\n                    borderRadius: '2px'       // Optional rounded corners\r\n                }}>\r\n                    {/* Start Date Selection */}\r\n                    <label style={{ display: 'block', marginBottom: '5px' }}>\r\n                        <strong>Caută începând cu:</strong>\r\n                    </label>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '5px', marginBottom: '10px' }}>\r\n                        <SelectControl\r\n                            __nextHasNoMarginBottom={true}\r\n                            value={ startYear }\r\n                            options={ yearOptions }\r\n                            onChange={ (newYear) => setStartYear(newYear) }\r\n                            style={{ textAlign: 'center' }}\r\n                        />\r\n                        <SelectControl\r\n                            __nextHasNoMarginBottom={true}\r\n                            value={ startMonth }\r\n                            options={ monthOptions }\r\n                            onChange={ (newMonth) => setStartMonth(newMonth) }\r\n                            style={{ textAlign: 'center' }}\r\n                        />\r\n                    </div>\r\n                    {/* End Date Selection */}\r\n                    <label style={{ display: 'block', marginBottom: '5px' }}>\r\n                        <strong>Caută până la:</strong>\r\n                    </label>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '5px', marginBottom: '10px' }}>\r\n                        <SelectControl\r\n                            __nextHasNoMarginBottom={true}\r\n                            value={ endYear }\r\n                            options={ yearOptions }\r\n                            onChange={ (newYear) => setEndYear(newYear) }\r\n                            style={{ textAlign: 'center' }}\r\n                        />\r\n                        <SelectControl\r\n                            __nextHasNoMarginBottom={true}\r\n                            value={ endMonth }\r\n                            options={ monthOptions }\r\n                            onChange={ (newMonth) => setEndMonth(newMonth) }\r\n                            style={{ textAlign: 'center' }}\r\n                        />\r\n                    </div>\r\n                    {/* Keywords Input */}\r\n                    <label style={{ display: 'block', marginBottom: '5px' }}>\r\n                        <strong>Cuvinte cheie obligatorii (separate prin virgulă)</strong>\r\n                    </label>\r\n                    <TextareaControl\r\n                        __nextHasNoMarginBottom={true}\r\n                        value={ mandatoryKeywords }\r\n                        onChange={ (value) => setMandatoryKeywords(value) }\r\n                        rows={1}\r\n                        style={{ \r\n                            marginBottom: '10px',\r\n                            padding: '6px 8px',\r\n                            resize: 'none',\r\n                            overflow: 'hidden',\r\n                            maxHeight: '200px',\r\n                         }}\r\n                        onInput={(e) => {\r\n                            e.target.style.height = 'auto';\r\n                            e.target.style.height = `${e.target.scrollHeight}px`;\r\n                          }}\r\n                    />\r\n                    <label style={{ display: 'block', marginBottom: '5px' }}>\r\n                        <strong>Cuvinte cheie opționale (separate prin virgulă)</strong>\r\n                    </label>\r\n                    <TextareaControl\r\n                        __nextHasNoMarginBottom={true}\r\n                        value={ optionalKeywords }\r\n                        onChange={ (value) => setOptionalKeywords(value)}\r\n                        rows={1}\r\n                        style={{ \r\n                            padding: '6px 8px',\r\n                            resize: 'none',\r\n                            overflow: 'hidden',\r\n                            maxHeight: '200px',\r\n                         }}\r\n                        onInput={(e) => {\r\n                            e.target.style.height = 'auto';\r\n                            e.target.style.height = `${e.target.scrollHeight}px`;\r\n                          }}\r\n                    />\r\n                </div>\r\n            </div>\r\n            \r\n            {/* Fetch Button and Advanced Options Toggle */}\r\n            <div style={{ display: 'flex', alignItems: 'center', marginTop: '10px', gap: '5px', maxHeight: '32px'}}>                \r\n                <Button \r\n                    id='zdg-fetch-similar-articles'\r\n                    variant='secondary'\r\n                    onClick={ fetchSimilarArticles } \r\n                    disabled={ fetching || !zdgApi.apiConfigured } \r\n                    style={{ flexGrow: 1, justifyContent: 'center', maxHeight: '32px' }}\r\n                    title={ !zdgApi.apiConfigured ? \"API URL nu este configurat\" : \"\" }\r\n                >\r\n                    { fetching ? \"Se obține...\" : \"Obține articole similare\" }\r\n                </Button>                \r\n                <Button \r\n                    variant='secondary'\r\n                    id='zdg-advanced-toggle'\r\n                    icon={settings} \r\n                    label=\"Opțiuni avansate\" \r\n                    onClick={() => setShowAdvancedOptions(!showAdvancedOptions)} \r\n                    isPressed={showAdvancedOptions}\r\n                    style={{maxHeight: '32px', maxWidth: '32px', minWidth: '32px'}}\r\n                />\r\n            </div>            \r\n            {!zdgApi.apiConfigured && (\r\n                <p style={{ color: 'orange', marginTop: '5px' }}>\r\n                    Căutarea automată nu este disponibilă.\r\n                </p>\r\n            )}\r\n            {apiError && zdgApi.apiConfigured && (\r\n                <p style={{ color: 'red', marginTop: '5px' }}>\r\n                    {apiError}\r\n                </p>\r\n            )}\r\n            \r\n            <hr style={{marginTop:'10px', marginBottom:'10px'}}></hr>\r\n            <div style={{ marginTop: '10px' }}>\r\n                { articles.map( article => (\r\n                    <div key={ article.ID } style={{ marginBottom: '10px' }}>\r\n                        <CheckboxControl\r\n                            __nextHasNoMarginBottom={true}\r\n                            label={ <strong>{ article.title }</strong> }\r\n                            checked={ selectedArticles.some(item => item.ID === article.ID) }\r\n                            onChange={ () => toggleArticle(article) }\r\n                        />\r\n                        <div style={{ \r\n                            display: 'flex', \r\n                            alignItems: 'center', \r\n                            fontSize: '12px', \r\n                            color: '#555' \r\n                            }}>\r\n                               \r\n                            <span>\r\n                                Publicat: { formatDate( article.date ) }\r\n                            </span>\r\n                            <Button \r\n                                isSmall \r\n                                onClick={ () => window.open(article.url, '_blank') }\r\n                                variant=\"link\"\r\n                                style={{\r\n                                    padding: '0',\r\n                                }}\r\n                            >\r\n                                <Icon icon={external} />\r\n                            </Button> \r\n                        </div>\r\n                    </div>\r\n                )) }\r\n            </div>\r\n        </PluginDocumentSettingPanel>\r\n    );\r\n};\r\n\r\n// registerPlugin('zdg-related-plugin', { render: SidebarPanel });\r\nif (!window.zdgPluginRegistered) {\r\n    registerPlugin(\"zdg-related-plugin\", {\r\n        render: SidebarPanel, \r\n    });\r\n    window.zdgPluginRegistered = true;\r\n}"],"names":["registerPlugin","PluginDocumentSettingPanel","CheckboxControl","Button","ToggleControl","SelectControl","TextControl","IconButton","PanelBody","TextareaControl","useEntityProp","useState","useEffect","useSelect","Icon","external","settings","jsx","_jsx","jsxs","_jsxs","formatDate","publishedAt","date","Date","toLocaleDateString","day","month","year","SidebarPanel","meta","setMeta","postContent","select","getEditedPostAttribute","selectedArticles","JSON","parse","zdg_related_articles","e","console","error","relatedEnabled","zdg_related_enabled","fetching","setFetching","articles","setArticles","startYear","setStartYear","getFullYear","toString","startMonth","setStartMonth","currentYear","currentMonth","getMonth","padStart","endYear","setEndYear","endMonth","setEndMonth","showAdvancedOptions","setShowAdvancedOptions","mandatoryKeywords","setMandatoryKeywords","optionalKeywords","setOptionalKeywords","yearOptions","Array","from","length","_","i","label","value","reverse","monthOptions","toggleRelatedEnabled","toggleArticle","article","newSelection","isSelected","some","item","ID","filter","stringify","apiError","setApiError","parseKeywords","keywordsString","split","map","kw","trim","fetchSimilarArticles","zdgApi","apiConfigured","tempDiv","document","createElement","innerHTML","textContent","innerText","replace","selectedIds","apiUrl","endpoint","fetch","method","headers","body","query_text","top_k","end_date","parseInt","getDate","mandatory_kw","optional_kw","then","response","ok","Error","status","json","data","log","isArray","message","newArticlesData","filteredNewArticles","newArticle","includes","maxNewArticlesToAdd","Math","max","limitedNewArticles","slice","catch","finally","manualArticleLink","setManualArticleLink","manualArticleError","setManualArticleError","handleAddManualArticle","postName","Boolean","pop","baseUrl","nonce","prevArticles","name","title","children","__nextHasNoMarginBottom","checked","onChange","style","marginTop","htmlFor","display","marginBottom","alignItems","justifyContent","width","flexGrow","id","placeholder","type","newLink","isSecondary","onClick","paddingBottom","marginLeft","height","fontSize","lineHeight","color","className","maxHeight","opacity","overflow","transition","visibility","backgroundColor","padding","border","borderRadius","gap","options","newYear","textAlign","newMonth","rows","resize","onInput","target","scrollHeight","variant","disabled","icon","isPressed","maxWidth","minWidth","isSmall","window","open","url","zdgPluginRegistered","render"],"sourceRoot":""}